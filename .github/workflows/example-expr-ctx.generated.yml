# Do not modify!
# This file was generated by https://github.com/JLarky/gha-ts

name: "Example: expr/ctx demo"
"on": 
  push: 
    branches: 
      - main
  pull_request: 
    {}
jobs: 
  demo: 
    runs-on: ubuntu-latest
    steps: 
      - uses: actions/checkout@v4
      - name: Echo current ref using ctx
        run: "echo ${{ github.ref }}"
      - name: Echo formatted message (format)
        run: "echo ${{ format('Run {0} on {1}', github.run_id, runner.os) }}"
      - name: Echo env var (mapped)
        env: 
          NODE_VERSION: 18.17.1
        run: "echo ${{ env.NODE_VERSION }}"
      - name: Use secret in env
        env: 
          GITHUB_TOKEN: "${{ secrets.GITHUB_TOKEN }}"
        run: "echo 'token is set'"
      - name: Echo org variable via ctx.vars
        env: 
          ORG_VAR: "${{ vars.MY_ORG_VAR }}"
        run: "echo \"$ORG_VAR\""
      - name: Echo repo owner (github prop)
        run: "echo ${{ github.repository_owner }}"
      - name: Echo PR number (ctx.prEvent.number)
        if: "${{ contains(github.event_name, 'pull_request') }}"
        run: "echo ${{ github.event.pull_request.number }}"
      - name: Echo when on main using fn/expr
        if: "${{ startsWith(github.ref, 'refs/heads/main') }}"
        run: "echo 'This runs only on main'"
      - name: Echo contains check via fn.contains
        if: "${{ contains(github.ref_name, 'main') }}"
        run: "echo 'ref_name contains main'"
      - name: Join example
        run: "echo ${{ join(fromJSON('[\"a\",\"b\",\"c\"]'), ',') }}"
      - name: PR number via ctx.prEvent
        if: "${{ contains(github.event_name, 'pull_request') }}"
        run: "echo ${{ github.event.pull_request.number }}"
      - name: PR head/base refs
        if: "${{ contains(github.event_name, 'pull_request') }}"
        env: 
          HEAD_REF: "${{ github.event.pull_request.head.ref }}"
          BASE_REF: "${{ github.event.pull_request.base.ref }}"
        run: "echo \"$HEAD_REF\"; echo \"$BASE_REF\""
