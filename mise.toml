[tools]
bun = "1.3.0"
pkl = "0.29.1"

[tasks.format]
description = "Format TypeScript files with oxfmt"
run = "bun run format"

[tasks."format:check"]
description = "Check TypeScript formatting without writing"
run = "bun run format:check"

[tasks.test]
description = "Run tests with Bun"
run = "bun test"

[tasks.typecheck]
description = "Run TypeScript type checking"
run = "bun run typecheck"

[tasks.install]
description = "Install dependencies with Bun"
run = "bun install"

[tasks.actionlint]
description = "Run actionlint"
run = 'docker run --rm -t -v "$PWD":/repo -w /repo rhysd/actionlint:1.7.8 -color'

[tasks."workflows:clear"]
description = "Remove generated GitHub Actions workflows"
run = "rm -r .github/workflows/*.generated.yml"

[tasks."workflows:build"]
description = "Generate GitHub Actions workflows from TypeScript"
run = "bun run .github/build.ts"
sources = [".github/build.ts", ".github/**/*.ts", "src/**/*.ts"]
outputs = [".github/workflows/*.generated.yml"]
